<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TelnyxRTC  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="TelnyxRTC  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">TelnyxRTC 0.0.4 Docs</a> (88% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">TelnyxRTC Reference</a>
        <img id="carat" src="img/carat.png" />
        TelnyxRTC  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Call.html">Call</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TxClient.html">TxClient</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/CallState.html">CallState</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LogLevel.html">LogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TxError.html">TxError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TxError/SocketFailureReason.html">‚Äì SocketFailureReason</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TxError/ClientConfigurationFailureReason.html">‚Äì ClientConfigurationFailureReason</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TxError/CallFailureReason.html">‚Äì CallFailureReason</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TxError/ServerErrorReason.html">‚Äì ServerErrorReason</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/TxClientDelegate.html">TxClientDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/TxCallInfo.html">TxCallInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TxConfig.html">TxConfig</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TxPushConfig.html">TxPushConfig</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='telnyx-webrtc-ios' class='heading'>telnyx-webrtc-ios</h1>

<p>Enable Telnyx real-time communication services on iOS. :telephone_receiver: :fire:</p>
<h2 id='project-structure' class='heading'>Project structure:</h2>

<ul>
<li>SDK project: Enable Telnyx WebRTC communications.</li>
<li>SDK Tests project.</li>
<li>Demo app project.</li>
</ul>
<h2 id='project-setup' class='heading'>Project Setup:</h2>

<ol>
<li>Clone the repository</li>
<li>Run the command <code>pod install</code> to install de dependencies inside the project root folder.</li>
<li>Open the Workspace : <code>TelnyxRTC.xcworkspace</code></li>
<li>You will find 3 targets to build: 

<ul>
<li>The SDK</li>
<li>The SDK Tests</li>
<li>The Demo App</li>
</ul></li>
</ol>

<p align="center">
<img width="247" alt="Screen Shot 2021-05-04 at 18 34 45" src="https://user-images.githubusercontent.com/75636882/117073153-e8f9e680-ad07-11eb-9d1f-685397b071a6.png">
</p>

<ol>
<li>Select the target <code>TelnyxRTC (TelnyxRTC Project)</code> to build the SDK
<p align="center">
<img width="243" alt="Screen Shot 2021-05-04 at 18 35 18" src="https://user-images.githubusercontent.com/75636882/117073140-e3040580-ad07-11eb-8ac6-dc99531550e3.png"></li>
</ol>

<p></p></p>

<ol>
<li>Select the target <code>TelnyxRTCTests</code> to run the tests. You will need to long press over the Run button and select <code>Build for testing</code></li>
</ol>

<p align="center">
<img width="153" align="center" alt="Screen Shot 2021-03-03 at 10 04 05" src="https://user-images.githubusercontent.com/75636882/109810077-d4b24400-7c07-11eb-91ec-d81e72ae9069.png">
</p>

<ol>
<li><p>Select target <code>TelnyxWebRTCDemo</code> to run the demo app. The SDK should be manually builded in order to get the app running (Step 5)</p></li>
<li><p>Enjoy üòé
</br>
</br></p>

<table>
<tr>
<td>Credentials</td>
 <td>Outbound call</td>
 <td>Incoming call</td>
</tr>
<tr>
<td><img src="https://user-images.githubusercontent.com/75636882/116748486-eaf53a00-a9d5-11eb-9093-968e8f2bde6e.gif" width=270></td>
<td><img src="https://user-images.githubusercontent.com/75636882/116748473-e597ef80-a9d5-11eb-94a3-2a4a044ea4ff.gif" width=270></td>
<td><img src="https://user-images.githubusercontent.com/75636882/116748481-e92b7680-a9d5-11eb-9fb5-6fe4cb10b797.gif" width=270></td>
</tr>
</table></li>
</ol>

<hr>

<p></br></p>
<h2 id='adding-telnyx-sdk-to-your-ios-client-application' class='heading'>Adding Telnyx SDK to your iOS Client Application:</h2>

<p>Currently the iOS SDK is supported using cocoapods. </p>
<h3 id='cocoapods' class='heading'>Cocoapods</h3>

<p>If your xcode project is not using <a href="https://cocoapods.org/">cocoapods</a> yet, you will need to configure it.</p>

<ol>
<li>Open your podfile and add the TelnyxRTC. 
<code>
pod &#39;TelnyxRTC&#39;, &#39;~&gt; 0.0.4&#39;
</code></li>
<li>Install your pods. You can add the flag &ndash;repo-update to ensure your cocoapods has the specs updated.
<code>
pod install --repo-update
</code></li>
<li>Open your .xcworkspace</li>
<li>Import TelnyxRTC at the top level of your class:
<code>
import TelnyxRTC
</code></li>
<li><p>Disable BITCODE (The GoogleWebRTC dependency has BITCODE disabled):  Go to the Build Settings tab of your app target, search for ‚Äúbitcode‚Äù and set it to ‚ÄúNO‚Äù</p>

<p align="center">
<img width="743" alt="Screen Shot 2021-05-07 at 17 46 08" src="https://user-images.githubusercontent.com/75636882/117506545-235bc180-af5c-11eb-91eb-00d60f5844fa.png">
</p></li>
<li><p>Enable VoIP and Audio background modes: Go to Signing &amp; Capabilities tab, press the +Capability button and add those background modes:</p>

<p align="center">
<img width="719" alt="Screen Shot 2021-05-07 at 17 46 54" src="https://user-images.githubusercontent.com/75636882/117506607-3ff7f980-af5c-11eb-8df2-2f9170c12baf.png">
</p></li>
<li><p>Go to your Info.plist file and add the ‚ÄúPrivacy - Microphone Usage Description‚Äù key with a description that your app requires microphone access in order to make VoIP calls. </p>

<p align="center">
<img width="911" alt="Screen Shot 2021-05-07 at 17 48 17" src="https://user-images.githubusercontent.com/75636882/117506706-6d44a780-af5c-11eb-87e2-d6be092474f2.png">
</p></li>
<li><p>You are all set!
</br></p></li>
</ol>
<h2 id='usage' class='heading'>Usage</h2>
<h3 id='telnyx-client-setup' class='heading'>Telnyx client setup</h3>
<pre class="highlight plaintext"><code>// Initialize the client
let telnyxClient = TxClient()

// Register to get SDK events
telnyxClient.delegate = self

// Setup yor connection parameters.

// Set the login credentials and the ringtone/ringback configurations if required.
// Ringtone / ringback tone files are not mandatory.
// You can user your sipUser and password
// This is what we are currently using on the Demo App
let txConfigUserAndPassowrd = TxConfig(sipUser: sipUser,
                                       password: password,
                                       ringtone: "incoming_call.mp3",
                                       ringBackTone: "ringback_tone.mp3",
                                       //You can choose the appropriate verbosity level of the SDK.
                                       //Logs are disabled by default
                                       logLevel: .all)

// Or use a JWT Telnyx Token to authenticate (recommended)
let txConfigToken = TxConfig(token: "MY_JWT_TELNYX_TOKEN",
                             ringtone: "incoming_call.mp3",
                             ringBackTone: "ringback_tone.mp3",
                             //You can choose the appropriate verbosity level of the SDK. Logs are disabled by default
                             logLevel: .all)

do {
   // Connect and login
   // Use `txConfigUserAndPassowrd` or `txConfigToken`
   try telnyxClient.connect(txConfig: txConfigToken)
} catch let error {
   print("ViewController:: connect Error \(error)")
}

// You can call client.disconnect() when you're done.
Note: you need to relese the delegate manually when you are done.

// Disconnecting and Removing listeners.
telnyxClient.disconnect();

// Release the delegate
telnyxClient.delegate = nil

</code></pre>
<h3 id='telnyx-client-delegate' class='heading'>Telnyx client delegate</h3>

<p>You will need to instantiate the client and set the delegate. </p>
<pre class="highlight plaintext"><code>// Initialize the client
let telnyxClient = TxClient()

// Register to get SDK events
telnyxClient.delegate = self
</code></pre>

<p>Then you will receive the following events:</p>
<pre class="highlight plaintext"><code>extension ViewController: TxClientDelegate {

    func onRemoteCallEnded(callId: UUID) {
        // Call has been removed internally.
    }

    func onSocketConnected() {
       // When the client has successfully connected to the Telnyx Backend.
    }

    func onSocketDisconnected() {
       // When the client from the Telnyx backend
    }

    func onClientError(error: Error)  {
        // Something went wrong.
    }

    func onClientReady()  {
       // You can start receiving incoming calls or
       // start making calls once the client was fully initialized.
    }

    func onSessionUpdated(sessionId: String)  {
       // This function will be executed when a sessionId is received.
    }

    func onIncomingCall(call: Call)  {
       // Someone is calling you.
    }

    // You can update your UI from here base on the call states.
    // Check that the callId is the same as your current call.
    func onCallStateUpdated(callState: CallState, callId: UUID) {
      // handle the new call state
      switch (callState) {
      case .CONNECTING:
          break
      case .RINGING:
          break
      case .NEW:
          break
      case .ACTIVE:
          break
      case .DONE:
          break
      case .HELD:
          break
      }
    }
}
</code></pre>
<h2 id='calls' class='heading'>Calls</h2>
<h3 id='outboud-call' class='heading'>Outboud call</h3>
<pre class="highlight plaintext"><code> // Create a client instance
   self.telnyxClient = TxClient()

   // Asign the delegate to get SDK events
   self.telnyxClient?.delegate = self

   // Connect the client (Check TxClient class for more info)
   self.telnyxClient?.connect(....)

   // Create the call and start calling
   self.currentCall = try self.telnyxClient?.newCall(callerName: "Caller name",
                                                     callerNumber: "155531234567",
                                                     // Destination is required and can be a phone number or SIP URI
                                                     destinationNumber: "18004377950",
                                                     callId: UUID.init())
</code></pre>
<h3 id='inbound-call' class='heading'>Inbound call</h3>

<p>How to answer an incoming call:</p>
<pre class="highlight plaintext"><code>//Init your client
func initTelnyxClient() {
   //
   self.telnyxClient = TxClient()

   // Asign the delegate to get SDK events
   self.telnyxClient?.delegate = self

   // Connect the client (Check TxClient class for more info)
   self.telnyxClient?.connect(....)
}

extension ViewController: TxClientDelegate {
    //....
    func onIncomingCall(call: Call) {
        //We are automatically answering any incoming call as an example, but
        //maybe you want to store a reference of the call, and answer the call after a button press.
        self.myCall = call.answer()
    }
}
</code></pre>
<h3 id='documentation' class='heading'>Documentation:</h3>

<p>For more information you can:</p>

<ol>
<li>Clone the repository</li>
<li>And check the exported documentation in:  <code>docs/index.html</code></li>
</ol>

<hr>

<p>Questions? Comments? Building something rad? <a href="https://joinslack.telnyx.com/">Join our Slack channel</a> and share.</p>
<h2 id='license' class='heading'>License</h2>

<p><a href="./LICENSE"><code>MIT Licence</code></a> ¬© <a href="https://github.com/team-telnyx">Telnyx</a></p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://www.telnyx.com/" target="_blank" rel="external">Telnyx</a>. All rights reserved. (Last updated: 2021-08-13)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ‚ô™‚ô´ v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
